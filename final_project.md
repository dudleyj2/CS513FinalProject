# Theory & Practice of Data Cleaning Final Project
#### James Dudley
#### July 31, 2021
#### CS 513

## Introduction
Shared electric scooters first hit consumers in September 2017 when the then start-up, Bird, descended on Santa Monica, California.  Within 14 months, the company was valued at over $2 billion and had a presence in over 100 cities around the globe.  Shortly after that initial launch, more companies like Lyft, Uber, Spin, and Lime introduced their electric scooters.  What began as a novelty quickly drew controversial opinions and government regulations, but has more or less survived and is here to stay as a legitimate form of transportation around city centers.
According to the TomTom Traffic Index Report, traffic across cities worldwide had been steadily increasing for years until the Covid-19 pandemic temporarily reduced the number of commuters and city residents in many metropolitan areas.  After initial shake-out phases and pilot programs, many American cities in particular have embraced scooter programs not only as a way of reducing traffic, but as an extension of public transportation where infrastructure where it is lacking.  Now that the novelty has worn off and people are using scooters as a reasonable way to get from one place to another, there is a lot of potential to gain insight from the data and information generated by the scooters that people are riding.


## Identifying a Dataset
The dataset, <i>D</i>, that has been selected for this project is the [E-Scooter Trips 2020 Pilot Program Dataset](https://data.world/cityofchicago/3rse-fbp6) produced by Data World and the City of Chicago.  For the 2020 Pilot program, the City updated the rules and requirements for e-scooter vendors based on the results of the 2019 data.  

<p align="center">
 <img src=img/chicago_scooter_zones.png/>
    <br>
    <em><b>Image 1:</b> Map of Chicago E-Scooter Operation Zones</em>
</p>


As seen in Image 1 above, the scooters were limited allowed to operate citywide with a handful of exceptions.  Shared electric scooters were prohibited from the Lakefront Trail, Central Business District, and 606 Trail.  Additionally, vendors were limited to 3,333 scooters, had to deploy 50% to the Equity Priority Area shown in Image 1, and scooters could not be ridden on. Sidewalks between 5am and 10pm.  Lastly, riders were required to lock their scooters to a fixed object to end their trip to eliminate the sidewalk clutter and clear pathways for other pedestrians.

This raw dataset consists of ~630,000 rows of scooter commuter data in Chicago, Illinois, from August to December of 2020.  Each row contains 16 columns.  Table 1 below contains each of those columns and their datatypes.



|Column Name	| Description	| Type
|---|---|---|
|Trip ID	|A unique ID for each trip.|Plain Text
|Start Time	|When the trip started, rounded to the nearest hour.|Date & Time
|End Time	|When the trip ended, rounded to the nearest hour.|Date & Time
|Trip Distance	|Trip distance in meters. (Divide by 1609 for miles.)|Number
|Trip Duration	|Trip time in seconds.|Number
|Vendor	|The vendor of the scooter|Plain Text
|Start Community Area Number	|The Community Area number where the trip started.|Number
|End Community Area Number	|The Community Area number where the trip ended.|Number
|Start Community Area Name	|The Community Area name where the trip started.|Plain Text
|End Community Area Name	|The Community Area name where the trip ended.|Plain Text
|Start Centroid Latitude	|The latitude of the center of the trip start Community Area. This column will be blank for locations outside Chicago.|Number
|Start Centroid Longitude	|The longitude of the center of the trip start Community Area. This column will be blank for locations outside Chicago.|Number
|Start Centroid Location	|The location of the center of the trip start Community Area. This column will be blank for locations outside Chicago.|Point
|End Centroid Latitude	|The latitude of the center of the trip end Community Area. This column will be blank for locations outside Chicago.|Number
|End Centroid Longitude	|The longitude of the center of the trip end Community Area. This column will be blank for locations outside Chicago.|Number
|End Centroid Location	|The location of the center of the trip end Community Area. This column will be blank for locations outside Chicago.|Point

<p align="center">
    <em><b>Table 1:</b> Description of Dataset "D" Columns </em>
</p>


## Target Use Cases
With the success of the 2020 Pilot E-Scooter Program, our goal in mind here is to further legitimize the adoption of shared e-scooters as a means of transportation throughout Chicago.  One way that the city can promote the use of alternative methods of transportation outside of automobiles is to increase the number dedicated bike lanes. Thus, our primary target use case, <i>U<sub>1</sub></i>, is to use our data to determine the best placement for future dedicated bike lanes.  In order to get the most accurate locations for our suggested bike lane placements, data cleaning is required.  We want to eliminate certain outliers such as trips with unreasonably long or short durations and unreasonably long or short distances.  Given that our dataset is sufficiently large, we’ll also be removing rows with corrupted or missing data.  More detailed information and the steps for data cleaning are laid out in a later section.

In addition to our primary use case, we have two secondary use cases for our data. <i>U<sub>2</sub></i>, our use case where data cleaning is not necessary, will be to determine which times of the day have the highest earning potential for electric scooters.  The purpose of this is to determine potential surge pricing business models already in place by companies like Lyft and Uber, where the price of the trip is relative to real-time demand. Our other secondary use case, <i>U<sub>3</sub></i>, where data cleaning is not sufficient, will be to determine how many rides it takes for the e-scooters to start turning a profit for their vendors.  


## Raw Dataset Analysis
Before we begin our data cleaning steps, we’re going to need to take a closer look at the data itself.  In order to do so, we’re going to use the [Pandas]( https://pandas.pydata.org/docs/) and [NumPy](https://numpy.org/doc/) Python libraries.
```
import numpy as np
import pandas as pd

df = pd.read_csv('~/Downloads/e-scooter-trips-2020-1.csv')
raw_row_total = df.size/16

# Remove Rows from Table with NA Values
df.dropna(inplace=True)
na_row_total = df.size/16

print(f"Initial Raw Data Row Count: {raw_row_total}")
print(f"Row Count After Removing NA's: {na_row_total}")
print(f"Total NA Rows Removed: {raw_row_total - na_row_total}")
```
```
Initial Raw Data Row Count: 630816.0
Row Count After Removing NA's: 629175.0
Total NA Rows Removed: 1641.0
```
Right off the bat, we're removing 1,641 rows from our dataset.  Now that these rows have been removed, let's peek at some important fields of the data to get an idea of important statistical values associated with them, like mean, median, and percentile ranges.

```
print(f'\nTrip Duration Statistics (Seconds)')
print(df['Trip Duration'].describe())

print(f'\nTrip Distance Statistics (Feet)')
print(df['Trip Distance'].describe())
```
```
Trip Duration Statistics (Seconds)
count    629175.000000
mean        993.401151
std        1352.792422
min           0.000000
25%         305.000000
50%         570.000000
75%        1125.000000
max      204182.000000
Name: Trip Duration, dtype: float64

Trip Distance Statistics (Feet)
count    629175.000000
mean       2905.926094
std        3707.496669
min           1.000000
25%         822.000000
50%        1868.000000
75%        3641.000000
max       49997.000000
Name: Trip Distance, dtype: float64
```

As seen in the code output above, we have a wide range of distances and durations, some of which are unreasonable to include in our analysis.  The maximum trip duration, for example, is over 204,000 seconds, or 56 hours and 40 minutes.  This, and an assortment of other entries in our data set are likely due to user error, where the scooter rider forgot to lock the scooter and end their trip.  The minimum duration of 0 seconds isn't long enough to move at all.

Looking at the trip distance statistices, the maximum trip distance, is almost 50,000 feet, or nearly 10 miles. It's also over 13 times the 75th percentile distance of just 3,641 feet, or 0.69 miles. Comparatively, the minimum distance is just 1 foot - much too small to be a legitimate commute.

Needless to say, there are plenty of rows with outlier data that we should remove in order to create <i>D'</i>, our cleaned data set.